ã€€ã¯ã¦ãªãƒ–ãƒ­ã‚°ãªã©ã§è¨˜äº‹ã‚’å…¬é–‹ã™ã‚‹éš›ã«ã¯ã€å…¬é–‹å‰ã«è»½ãèª¤å­—ã‚„è„±å­—ã®ç¢ºèªã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€äººã®ç›®ã§ã®ç¢ºèªã ã¨ä¸å‚™ã®è¦‹é€ƒã—ãŒã‚ã£ãŸã‚Šã€ä½•ã‚ˆã‚Šæ‰‹é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã“ã®å•é¡Œã®è§£æ±ºã™ã‚‹ãŸã‚ã«ã€ä»Šå›ã¯GitHub Actionsã¨textlintã‚’ä½¿ã£ã¦æ ¡æ­£ä½œæ¥­ã‚’æ¥½ã«ã—ã¾ã—ãŸã€‚

## ã¯ã˜ã‚ã«

ã€€GitHub Actionsã¨textlintã«ã¤ã„ã¦ã¯ã€ãã‚Œãã‚Œä¸‹è¨˜ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå‚è€ƒã«ãªã‚‹ã¨æ€ã„ã¾ã™ã€‚  

GitHub Actionsã¯ã€GitHubä¸Šã§æ§˜ã€…ãªæ“ä½œã«å¿œã˜ã¦ä»»æ„ã®å‡¦ç†ã‚’å®Ÿè¡Œã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚

* [GitHub Actionsã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - GitHub Docs](https://docs.github.com/ja/actions)
* [GitHubã®æ–°æ©Ÿèƒ½ã€ŒGitHub Actionsã€ã§è©¦ã™CI/CD](https://knowledge.sakura.ad.jp/23478/)

textlintã¯ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã‹ã‚ŒãŸæ–‡ç« ã‚’æ ¡æ­£ã™ã‚‹JavaScriptè£½ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

* [textlint](https://textlint.github.io/) 
* [textlint ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨åŸºæœ¬çš„ãªä½¿ã„æ–¹](https://maku.blog/p/3veuap5/)

textlintã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ«ãƒ¼ãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ä¸‹è¨˜ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ãƒ«ãƒ¼ãƒ«ã®ã†ã¡ã€å¿…è¦ãªã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

https://github.com/textlint/textlint/wiki/Collection-of-textlint-rule

## textlintã®è¨­å®š 

ã€€ä»Šå›ã¯ç§ã®æ–‡ç« ã«é¦´æŸ“ã¿ãã†ãªSmartHRç”¨ãƒ«ãƒ¼ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¾ã™ã€‚

* [ã‚ˆã‚Šã‚ˆã„æ–‡æ›¸ã‚’æ›¸ããŸã‚ã®æ ¡æ­£ãƒ„ãƒ¼ãƒ«ã€Œtextlintã€ã®SmartHRç”¨ãƒ«ãƒ¼ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’å…¬é–‹ã—ã¾ã—ãŸï¼ï½œSmartHRã‚ªãƒ¼ãƒ—ãƒ³ç¤¾å†…å ±]
(https://shanaiho.smarthr.co.jp/n/n881866630eda)
* [textlint-rule-preset-smarthr](https://github.com/kufu/textlint-rule-preset-smarthr)

ã•ã‚‰ã«ã€å˜èªã®è¡¨è¨˜ã‚†ã‚Œã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹[textlint-rule-prh](https://github.com/textlint-rule/textlint-rule-prh)ã¨ç‰¹å®šã®æ–‡å­—åˆ—ã‚„æ–‡ç« ã‚’ãƒã‚§ãƒƒã‚¯ã—ãªã„ã‚ˆã†ã«ã™ã‚‹[textlint-filter-rule-allowlist](https://github.com/textlint/textlint-filter-rule-allowlist)ã‚’ä½¿ã„ã¾ã™ã€‚

textlintã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«`.textlintrc`ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ä½œæˆã—ã¾ã—ãŸã€‚

```json
{
    "rules": {
        "preset-smarthr": {
            "sentence-length": {
                max: 150
            }
        },
        "prh": {
            "rulePaths": [
                "dict/prh.yml",
                "dict/WEB+DB_PRESS.yml"
            ]
        },
   },
    "filters": {
        "allowlist": {
            "allow": [
                "/http(.+):embed:cite/",    (1)
                "/.+ğŸ‘€/",                   (2)
                "/.+ğŸ±/"                    (3)
            ]
        }
    }
}
```

ã€€`preset-smarthr`ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤šãã®ãƒ«ãƒ¼ãƒ«ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€1æ–‡ã®æœ€å¤§æ–‡å­—æ•°ã¯120æ–‡å­—ã¾ã§ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ç§ã®æ„Ÿè¦šã ã¨150æ–‡å­—ãã‚‰ã„ã¾ã§è¨±å®¹ã—ã¦ã»ã—ã„ã®ã§ã€å¤‰æ›´ã—ã¦ã„ã¾ã™ã€‚ä»–ã®ãƒ«ãƒ¼ãƒ«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ã¾ã¾ã§ã™ã€‚  
ã€€`prh`ã«ã¯è¡¨è¨˜ã‚†ã‚Œã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹å˜èªã®è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚`preset-smarthr`ã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸€éƒ¨ã®å˜èªã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ãŒã€ç‰©è¶³ã‚Šãªã„ã¨æ„Ÿã˜ãŸã®ã§[WEB+DB PRESSç”¨èªçµ±ä¸€ãƒ«ãƒ¼ãƒ«](https://gist.github.com/inao/f55e8232e150aee918b9)ã‚’prhå½¢å¼ã«ã—ãŸ[WEB+DB_PRESS.yml](https://github.com/prh/rules/blob/master/media/WEB%2BDB_PRESS.yml)ã‚’å°‘ã—æ”¹è‰¯ã—ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚å…¬é–‹ã•ã‚Œã¦ã„ã‚‹è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚«ãƒãƒ¼ã§ããªã„å ´åˆã¯ã€è¾æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªåˆ†ã§ä½œæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚[ã“ã¡ã‚‰](https://github.com/prh/prh/blob/master/misc/prh.yml)ã‚’å‚è€ƒã«ä½œæˆã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚
ã€€`allowlist`ã«ã¯textlintã§ãƒã‚§ãƒƒã‚¯ã—ã¦ã»ã—ããªã„æ–‡ç« ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ­£è¦è¡¨ç¾ã§æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚(1)ã§ã¯ã€ã¯ã¦ãªãƒ–ãƒ­ã‚°ã§URLã®åŸ‹ã‚è¾¼ã¿ã‚’ã—ãŸå ´åˆã«ãªãœã‹`[`ãŒé–‰ã˜ã‚‰ã‚Œã¦ã„ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã†ã®ã§ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚(2)ã¨(3)ã¯ã€æ–‡æœ«ãŒçµµæ–‡å­—ã§çµ‚ã‚ã£ã¦ã„ã‚‹å ´åˆã«å¥ç‚¹ã§çµ‚ã‚ã£ã¦ã„ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã†ã®ã§ç„¡è¦–ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚çµµæ–‡å­—ã«ã¤ã„ã¦ã¯ã€ã“ã®æ–¹æ³•ã ã¨çµµæ–‡å­—ã”ã¨ã«è¨±å¯ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ãªã„ã¨ã„ã‘ãªã„ãŸã‚ã€æ­£è¦è¡¨ç¾ã§æ›¸ã‘ã‚‹ãªã‚‰æ›¸ããŸã„ãªï½ã¨ã„ã†æ°—æŒã¡ã§ã™ã€‚

## GitHub Actionsã®è¨­å®š

ã€€GitHub Actionsã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€`textlint.yml`ã¨ã—ã¦ä½œæˆã—ã¾ã—ãŸã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.github/workflows/`é…ä¸‹ã«ä¿å­˜ã—ã¦ãƒªãƒã‚¸ãƒˆãƒªã«pushã™ã‚‹ã“ã¨ã§ã€ãã‚Œä»¥é™ã¯mainãƒ–ãƒ©ãƒ³ãƒã¸ã®pushæ™‚ã«ã‚¸ãƒ§ãƒ–ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```yaml
name: textlint

on:
  push:
    branches: [ main ]

jobs:
  textlint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - uses: actions/setup-node@v2

      - name: Install textlint
        run: >
          npm install --save-dev
          textlint
          textlint-rule-preset-smarthr
          textlint-rule-prh 
          textlint-filter-rule-allowlist
      
      - name: Install dependent module
        run: npm install
      
      - name: Execute textlint
        run: npx textlint "articles/**/*.md"
```

`textlint`ã‚¸ãƒ§ãƒ–ã®ä¸­ã§è¡Œã£ã¦ã„ã‚‹ã®ã¯ä¸‹è¨˜ã§ã™ã€‚

1. ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
2. Node.jsç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
3. textlintã¨ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ«ãƒ¼ãƒ«ç­‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
4. ãã®ä»–ã€ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
5. `articles`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®Markdownå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«textlintã‚’å®Ÿè¡Œ

## å®Ÿè¡Œ

## ãŠã‚ã‚Šã«

ã€€ä»Šå›ã®GitHub Actionsã¨textlintã‚’ä½¿ã£ãŸæ ¡æ­£ä½œæ¥­ã®åŠ¹ç‡åŒ–ã¯ã€ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«å®Ÿæ–½ã—ã¾ã—ãŸã€‚ã¾ãŸã€textlintã«ã‚ˆã‚‹æŒ‡æ‘˜äº‹é …ã‚’GitHubã®Pull Requestã«ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ãã‚Œã‚‹[reviewdog](https://github.com/reviewdog/reviewdog)ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚‚ã‚ã‚‹ã¿ãŸã„ã§ã™ãŒã€ã‚ã–ã‚ã–ãƒ–ãƒ©ãƒ³ãƒã‚’åˆ‡ã£ã¦Pull Requestã‚’ä½œæˆã™ã‚‹ã®ã¯é¢å€’ã ã¨æ„Ÿã˜ãŸã®ã§å°å…¥ã—ã¾ã›ã‚“ã§ã—ãŸã€‚

* https://zenn.dev/yuta28/articles/blog-lint-ci-reviewdog
* https://zenn.dev/serima/articles/4dac7baf0b9377b0b58b
* https://www.forcia.com/blog/002374.html
